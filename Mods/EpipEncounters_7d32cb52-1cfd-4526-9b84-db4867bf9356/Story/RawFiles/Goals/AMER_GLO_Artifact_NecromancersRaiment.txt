Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
/*
QRY QRY_AMER_Reaction_Conditions_Additional((CHARACTERGUID)_Char, "Artifact_NecromancersRaiment", (STRING)_RequestID, (CHARACTERGUID)_Target, (REAL)_X, (REAL)_Y, (REAL)_Z)
AND
CharacterGetHitpointsPercentage(_Char, _Perc)
AND
_Perc > 15.0
THEN
PROC_AMER_GEN_AddHitPointPercentage(_Char, -15.0);
*/

PROC PROC_AMER_GEN_FilteredStatus_Applied((CHARACTERGUID)_Char, (CHARACTERGUID)_Source, "AMER_WITHER", (INTEGER)_Turns)
AND
DB_AMER_Artifacts_EquippedEffects(_ArtifactWielder, "Artifact_NecromancersRaiment", _)
AND // PIP - added per-round restriction
QRY_AMER_GEN_OncePerRound(_ArtifactWielder, "Artifact_NecromancersRaiment")
AND
CharacterIsEnemy(_Char, _ArtifactWielder, 1)
AND
CharacterCanSee(_ArtifactWielder, _Char, 1)
THEN
PROC_AMER_Reaction_Request(_ArtifactWielder, _Char, "Artifact_NecromancersRaiment", "", "skill_cast_shout_01_cast", 1);
DB_AMER_GEN_OncePerRound(_ArtifactWielder, "Artifact_NecromancersRaiment");



PROC PROC_AMER_Reaction_Fire((CHARACTERGUID)_Char, (CHARACTERGUID)_Target, (REAL)_X, (REAL)_Y, (REAL)_Z, "Artifact_NecromancersRaiment", (STRING)_RequestID, (INTEGER)_RitualBool)
AND
CombatGetIDForCharacter(_Char, _Combat)
THEN
PROC_AMER_GEN_CreateCorpse(_Target, _Combat, "RS3_FX_Skills_Voodoo_Curse_Target_Ground_01");

EXITSECTION

ENDEXITSECTION
ParentTargetEdge "AMER_GLO_Artifacts"